webpackJsonp([0],{804:function(t,e,r){r(837);var a=r(299)(r(818),r(853),null,null);a.options.__file="D:\\Project\\ranqibaojingpingtai\\src\\views\\dataCount\\DataCount.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] DataCount.vue: functional components are not supported with templates, they should use render functions."),t.exports=a.exports},813:function(t,e,r){"use strict";var a=String.prototype.replace,n=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return a.call(t,n,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},814:function(t,e,r){"use strict";var a=Object.prototype.hasOwnProperty,n=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),o=function(t){for(var e;t.length;){var r=t.pop();if(e=r.obj[r.prop],Array.isArray(e)){for(var a=[],n=0;n<e.length;++n)void 0!==e[n]&&a.push(e[n]);r.obj[r.prop]=a}}return e};e.arrayToObject=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},a=0;a<t.length;++a)void 0!==t[a]&&(r[a]=t[a]);return r},e.merge=function(t,r,n){if(!r)return t;if("object"!=typeof r){if(Array.isArray(t))t.push(r);else{if("object"!=typeof t)return[t,r];(n.plainObjects||n.allowPrototypes||!a.call(Object.prototype,r))&&(t[r]=!0)}return t}if("object"!=typeof t)return[t].concat(r);var o=t;return Array.isArray(t)&&!Array.isArray(r)&&(o=e.arrayToObject(t,n)),Array.isArray(t)&&Array.isArray(r)?(r.forEach(function(r,o){a.call(t,o)?t[o]&&"object"==typeof t[o]?t[o]=e.merge(t[o],r,n):t.push(r):t[o]=r}),t):Object.keys(r).reduce(function(t,o){var i=r[o];return a.call(t,o)?t[o]=e.merge(t[o],i,n):t[o]=i,t},o)},e.assign=function(t,e){return Object.keys(e).reduce(function(t,r){return t[r]=e[r],t},t)},e.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},e.encode=function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),r="",a=0;a<e.length;++a){var o=e.charCodeAt(a);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?r+=e.charAt(a):o<128?r+=n[o]:o<2048?r+=n[192|o>>6]+n[128|63&o]:o<55296||o>=57344?r+=n[224|o>>12]+n[128|o>>6&63]+n[128|63&o]:(a+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(a)),r+=n[240|o>>18]+n[128|o>>12&63]+n[128|o>>6&63]+n[128|63&o])}return r},e.compact=function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],a=0;a<e.length;++a)for(var n=e[a],i=n.obj[n.prop],s=Object.keys(i),c=0;c<s.length;++c){var l=s[c],u=i[l];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(e.push({obj:i,prop:l}),r.push(u))}return o(e)},e.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},e.isBuffer=function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},815:function(t,e,r){"use strict";var a=r(817),n=r(816),o=r(813);t.exports={formats:o,parse:n,stringify:a}},816:function(t,e,r){"use strict";var a=r(814),n=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},i=function(t,e){for(var r={},a=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,i=e.parameterLimit===1/0?void 0:e.parameterLimit,s=a.split(e.delimiter,i),c=0;c<s.length;++c){var l,u,d=s[c],f=d.indexOf("]="),p=-1===f?d.indexOf("="):f+1;-1===p?(l=e.decoder(d,o.decoder),u=e.strictNullHandling?null:""):(l=e.decoder(d.slice(0,p),o.decoder),u=e.decoder(d.slice(p+1),o.decoder)),n.call(r,l)?r[l]=[].concat(r[l]).concat(u):r[l]=u}return r},s=function(t,e,r){for(var a=e,n=t.length-1;n>=0;--n){var o,i=t[n];if("[]"===i)o=[],o=o.concat(a);else{o=r.plainObjects?Object.create(null):{};var s="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,c=parseInt(s,10);!isNaN(c)&&i!==s&&String(c)===s&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(o=[],o[c]=a):o[s]=a}a=o}return a},c=function(t,e,r){if(t){var a=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,i=/(\[[^[\]]*])/g,c=o.exec(a),l=c?a.slice(0,c.index):a,u=[];if(l){if(!r.plainObjects&&n.call(Object.prototype,l)&&!r.allowPrototypes)return;u.push(l)}for(var d=0;null!==(c=i.exec(a))&&d<r.depth;){if(d+=1,!r.plainObjects&&n.call(Object.prototype,c[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(c[1])}return c&&u.push("["+a.slice(c.index)+"]"),s(u,e,r)}};t.exports=function(t,e){var r=e?a.assign({},e):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||a.isRegExp(r.delimiter)?r.delimiter:o.delimiter,r.depth="number"==typeof r.depth?r.depth:o.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:o.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:o.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:o.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:o.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:o.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:o.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:o.strictNullHandling,""===t||null===t||void 0===t)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof t?i(t,r):t,s=r.plainObjects?Object.create(null):{},l=Object.keys(n),u=0;u<l.length;++u){var d=l[u],f=c(d,n[d],r);s=a.merge(s,f,r)}return a.compact(s)}},817:function(t,e,r){"use strict";var a=r(814),n=r(813),o={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},i=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(t){return i.call(t)},skipNulls:!1,strictNullHandling:!1},c=function t(e,r,n,o,i,c,l,u,d,f,p,h){var g=e;if("function"==typeof l)g=l(r,g);else if(g instanceof Date)g=f(g);else if(null===g){if(o)return c&&!h?c(r,s.encoder):r;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||a.isBuffer(g)){if(c){return[p(h?r:c(r,s.encoder))+"="+p(c(g,s.encoder))]}return[p(r)+"="+p(String(g))]}var y=[];if(void 0===g)return y;var v;if(Array.isArray(l))v=l;else{var m=Object.keys(g);v=u?m.sort(u):m}for(var b=0;b<v.length;++b){var w=v[b];i&&null===g[w]||(y=Array.isArray(g)?y.concat(t(g[w],n(r,w),n,o,i,c,l,u,d,f,p,h)):y.concat(t(g[w],r+(d?"."+w:"["+w+"]"),n,o,i,c,l,u,d,f,p,h)))}return y};t.exports=function(t,e){var r=t,i=e?a.assign({},e):{};if(null!==i.encoder&&void 0!==i.encoder&&"function"!=typeof i.encoder)throw new TypeError("Encoder has to be a function.");var l=void 0===i.delimiter?s.delimiter:i.delimiter,u="boolean"==typeof i.strictNullHandling?i.strictNullHandling:s.strictNullHandling,d="boolean"==typeof i.skipNulls?i.skipNulls:s.skipNulls,f="boolean"==typeof i.encode?i.encode:s.encode,p="function"==typeof i.encoder?i.encoder:s.encoder,h="function"==typeof i.sort?i.sort:null,g=void 0!==i.allowDots&&i.allowDots,y="function"==typeof i.serializeDate?i.serializeDate:s.serializeDate,v="boolean"==typeof i.encodeValuesOnly?i.encodeValuesOnly:s.encodeValuesOnly;if(void 0===i.format)i.format=n.default;else if(!Object.prototype.hasOwnProperty.call(n.formatters,i.format))throw new TypeError("Unknown format option provided.");var m,b,w=n.formatters[i.format];"function"==typeof i.filter?(b=i.filter,r=b("",r)):Array.isArray(i.filter)&&(b=i.filter,m=b);var j=[];if("object"!=typeof r||null===r)return"";var x;x=i.arrayFormat in o?i.arrayFormat:"indices"in i?i.indices?"indices":"repeat":"indices";var _=o[x];m||(m=Object.keys(r)),h&&m.sort(h);for(var C=0;C<m.length;++C){var O=m[C];d&&null===r[O]||(j=j.concat(c(r[O],O,_,u,d,f?p:null,b,h,g,y,w,v)))}var D=j.join(l),A=!0===i.addQueryPrefix?"?":"";return D.length>0?A+D:""}},818:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(843),n=r.n(a),o=r(815);r.n(o);e.default={name:"dataContent",data:function(){return{njAreaData:[],areaVal:"",aid:"",streetData:[],areaHouseVal:"",areaHotelVal:"",temperature:"",weather:"",weatherClass:""}},components:{"line-chart":n.a},computed:{weatherStatus:function(){return"晴"==this.weather?{bg:"sun",icon:"icon-sun"}:"多云"==this.weather?{bg:"test1",icon:"icon-icon-test1"}:"阴"==this.weather?{bg:"test1",icon:"icon-icon-test"}:"雷阵雨"==this.weather||"阵雨"==this.weather?{bg:"test1",icon:"icon-icon-test5"}:"冻雨"==this.weather?{bg:"test1",icon:"icon-icon-test1"}:"雨夹雪"==this.weather?{bg:"test1",icon:"icon-icon-test11"}:"小雨"==this.weather?{bg:"test1",icon:"icon-icon-test3"}:"中雨"==this.weather?{bg:"test1",icon:"icon-icon-test2"}:"大雨"==this.weather||"中到大雨"==this.weather?{bg:"test1",icon:"icon-icon-test4"}:"暴雨"==this.weather||"大到暴雨"==this.weather?{bg:"test1",icon:"icon-icon-test8"}:"大暴雨"==this.weather||"特大暴雨"==this.weather?{bg:"test1",icon:"icon-icon-test7"}:"阵雪"==this.weather||"小雪"==this.weather?{bg:"test1",icon:"icon-icon-test7"}:"中雪"==this.weather?{bg:"test1",icon:"icon-icon-test10"}:"大雪"==this.weather?{bg:"test1",icon:"icon-icon-test12"}:"暴雪"==this.weather?{bg:"test1",icon:"icon-icon-test15"}:"冰雹"==this.weather?{bg:"test1",icon:"icon-icon-test6"}:"雾"==this.weather?{bg:"test1",icon:"icon-icon-test16"}:"沙尘暴"==this.weather||"扬沙"==this.weather||"强沙尘暴"==this.weather?{bg:"test1",icon:"icon-icon-test14"}:"浮尘"==this.weather?{bg:"test1",icon:"icon-icon-test13"}:{bg:"test1",icon:"icon-icon-test22"}}},watch:{njAreaData:function(t){this.areaChange("830")}},mounted:function(){},methods:{progressClass:function(t){return t>=0&&t<20?"":t>=20&&t<40?"gre":t>=40&&t<60?"yel":t>=60&&t<80?"org":t>=80&&t<100?"red":"maxred"},areaChange:function(t){console.log(t),this.aid=t,this.areaHouse(t),this.areaHotel(t),this.getStreet(t),this.getWeather()},getWeather:function(){var t=this;this.axios("http://wthrcdn.etouch.cn/weather_mini?city=南京市").then(function(e){var r=e.data.data.forecast[0];t.temperature=r.low.substr(r.low.indexOf(" ")),t.weather=r.type}).catch(function(e){t.$Notice.error({title:"错误",desc:"获取天气数据时出错"})})},areaHouse:function(t){var e=this;this.axios.get("device/queryResidentNumByArea?areaId="+t).then(function(t){t.data.resultFlag&&(e.areaHouseVal=t.data.data)}).catch(function(t){e.$Notice.error({title:"错误",desc:"获取区总户数时出错"})})},areaHotel:function(t){var e=this;this.axios.get("device/queryRestaurantNumByArea?areaId="+t).then(function(t){t.data.resultFlag&&(e.areaHotelVal=t.data.data)}).catch(function(t){e.$Notice.error({title:"错误",desc:"获取区总饭店数时出错"})})},getStreet:function(t){for(var e=this,r=0;r<this.njAreaData.length;r++)t==this.njAreaData[r].id&&function(){var t=e.njAreaData[r].street;e.streetData=t;for(var a=0;a<t.length;a++)!function(r){e.axios.get("street/queryResidentNumByStreet?streetId="+t[r].id).then(function(a){a.data.resultFlag&&e.$set(t[r],"streetHouseVal",a.data.data)}).catch(function(t){e.$Notice.error({title:"错误",desc:"获取街道户数时出错"})}),e.axios.get("street/queryResidentNumByStreet?streetId="+t[r].id).then(function(a){a.data.resultFlag&&e.$set(t[r],"streetHouseVal",a.data.data)}).catch(function(t){e.$Notice.error({title:"错误",desc:"获取街道户数时出错"})}),e.axios.get("street/queryRestaurantNumByStreet?streetId="+t[r].id).then(function(a){a.data.resultFlag&&e.$set(t[r],"streetHotelVal",a.data.data)}).catch(function(t){e.$Notice.error({title:"错误",desc:"获取街道饭店数时出错"})}),e.axios.get("street/queryAlarmNumByStreet?streetId="+t[r].id).then(function(a){a.data.resultFlag&&e.$set(t[r],"alarmNum",a.data.data)}).catch(function(t){e.$Notice.error({title:"错误",desc:"获取街道报警次数时出错"})})}(a)}()},streetMes:function(t){this.$router.push({name:"streetAlarmLog",params:{aid:this.aid,sid:t}})}},created:function(){var t=this;new Promise(function(e){t.axios.get("region/countyAndStreet",{params:{id:830}}).then(function(r){var a=r.data;a.resultFlag?e(a.data):t.$Notice.error({title:"错误",desc:"获取区域数据时出错"})}).catch(function(e){t.$Notice.error({title:"错误",desc:"获取区域数据时服务出错"})})}).then(function(e){t.njAreaData=e})}}},820:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"lineChart",props:["aid"],data:function(){return{date:[],echartData:[],option:{title:{text:"",textStyle:{fontWeight:"normal",fontSize:16,color:"#F1F1F3"},left:"6%"},tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#57617B"}}},grid:{left:"3%",right:"8%",bottom:"3%",top:"25%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#57617B"}},name:"日期",data:["7-11","7-13","7-15","7-17","7-19","7-21","7-23"]}],yAxis:[{type:"value",name:"报警数",axisTick:{show:!1},axisLine:{lineStyle:{color:"#57617B"}},axisLabel:{margin:10,textStyle:{fontSize:14}},splitLine:{show:!1,lineStyle:{color:"#57617B"}}}],series:[{name:"报警",type:"line",smooth:!0,symbol:"circle",symbolSize:5,showSymbol:!1,lineStyle:{normal:{width:1}},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(0, 136, 212, 0.3)"},{offset:.8,color:"rgba(0, 136, 212, 0)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10}},itemStyle:{normal:{color:"rgb(0,136,212)",borderColor:"rgba(0,136,212,0.2)",borderWidth:12}},data:[5,10,2,5,7,3,1]}]}}},watch:{aid:function(t){this.echartInit()}},mounted:function(){},methods:{echartInit:function(){var t=this,e=[],r=[];new Promise(function(e){t.axios("alarm/statDateAndCount?regionId="+t.aid).then(function(r){if(r.data.data.length<1)t.sectionDate("2017-09-01",t.getNowDate()),e(r.data.data);else for(var a=0;a<r.data.data.length;a++)if(r.data.data[a].date)return t.sectionDate(r.data.data[a].date,t.getNowDate()),void e(r.data.data)}).catch(function(e){t.$Notice.error({title:"错误",desc:"获取Echarts数据时出错"})})}).then(function(a){t:for(var n=0;n<t.date.length;n++){for(var o=0;o<a.length;o++)if(t.date[n]==a[o].date){e.push(t.date[n]),r.push(a[o].count);continue t}e.push(t.date[n]),r.push("0")}t.option.xAxis[0].data=e,t.option.series[0].data=r,echarts.init(document.getElementById("main")).setOption(t.option,!0)})},sectionDate:function(t,e){for(var r=t,a=e,n=new Date(r),o=new Date(a),i=n.getTime(),s=o.getTime(),c=s-i,l=[],u=0;u<=c;u+=864e5){var d=new Date(i+u);l.push(d.getFullYear()+"-"+function(t){var e=t+1;return e>=1&&e<=9&&(e="0"+e),e}(d.getMonth())+"-"+d.getDate())}this.date=l},getNowDate:function(){var t=new Date,e=t.getMonth()+1,r=t.getDate();e>=1&&e<=9&&(e="0"+e),r>=0&&r<=9&&(r="0"+r);t.getHours(),t.getMinutes(),t.getSeconds();return t.getFullYear()+"-"+e+"-"+r}},created:function(){}}},834:function(t,e){},837:function(t,e){},843:function(t,e,r){r(834);var a=r(299)(r(820),r(850),null,null);a.options.__file="D:\\Project\\ranqibaojingpingtai\\src\\views\\dataCount\\lineChart.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] lineChart.vue: functional components are not supported with templates, they should use render functions."),t.exports=a.exports},850:function(t,e,r){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{attrs:{id:"main"}})},staticRenderFns:[]},t.exports.render._withStripped=!0},853:function(t,e,r){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dataContent"},[r("Row",{staticClass:"mesHead"},[r("Col",{staticClass:"weather",attrs:{span:"6"}},[r("div",{class:"weatherBg "+t.weatherStatus.bg}),t._v(" "),r("Row",[r("Col",{attrs:{span:"8"}},[r("div",{staticClass:"temperature"},[r("span",[t._v(t._s(t.temperature))])])]),t._v(" "),r("Col",{attrs:{span:"8"}},[r("div",{staticClass:"weatherIcon"},[r("i",{class:"ivu-icon "+t.weatherStatus.icon})])]),t._v(" "),r("Col",{attrs:{span:"8"}},[r("div",{staticClass:"area"},[r("Select",{attrs:{placeholder:"秦淮区"},on:{"on-change":t.areaChange},model:{value:t.areaVal,callback:function(e){t.areaVal=e},expression:"areaVal"}},t._l(t.njAreaData,function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.county))])}))],1)])],1)],1),t._v(" "),r("Col",{staticClass:"count",attrs:{span:"5"}},[r("div",[r("p",[t._v("常住户数："),r("span",[t._v(t._s(t.areaHouseVal))])]),t._v(" "),r("p",[t._v("商户饭店："),r("span",[t._v(t._s(t.areaHotelVal))])])])]),t._v(" "),r("Col",{staticClass:"chart",attrs:{span:"13"}},[r("line-chart",{attrs:{aid:t.aid}})],1)],1),t._v(" "),r("Row",{staticClass:"contentRow"},t._l(t.streetData,function(e){return r("Col",{key:e.sid,staticClass:"item_wrapper",attrs:{sm:12,md:8,lg:6}},[r("div",{on:{click:function(r){t.streetMes(e.id)}}},[r("h3",[t._v(t._s(e.street))]),t._v(" "),r("div",{staticClass:"streetCount"},[r("p",[t._v("常住户数:"),r("span",[t._v(t._s(e.streetHouseVal))])]),t._v(" "),r("p",[t._v("商户饭店:"),r("span",[t._v(t._s(e.streetHotelVal))])])]),t._v(" "),r("p",{staticClass:"progress"},[t._v("燃气报警次数")]),t._v(" "),r("Progress",{class:t.progressClass(e.alarmNum),attrs:{percent:e.alarmNum,status:"success","stroke-width":16}},[r("span",[t._v(t._s(e.alarmNum))])])],1)])}))],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});